-------------------
-- CRIAÇÃO DO BD --
-------------------


-- CRIA TABELA PESQUISADOR
CREATE TABLE PESQUISADOR(
CPF VARCHAR(4),
NOME VARCHAR(80) CONSTRAINT NN_PESQ_NOME NOT NULL,
INSTITUICAO VARCHAR(40) NOT NULL,
NASCIMENTO DATE,
CONSTRAINT PK_USUARIOS PRIMARY KEY (CPF),
CONSTRAINT AK_USU_CPF UNIQUE (NOME, NASCIMENTO)
);

-- CRIA TABELA EVENTO
CREATE TABLE EVENTO(
COD VARCHAR(4) PRIMARY KEY ,
NOME VARCHAR(80) NOT NULL,
SIGLA VARCHAR(10) NOT NULL UNIQUE,
ANO NUMBER(4)
);

-- CRIA TABELA ARTIGO
CREATE TABLE ARTIGO(
MAT VARCHAR(4),
TITULO VARCHAR(80) NOT NULL,
NOTA NUMBER(4,2) NOT NULL,
IDIOMA VARCHAR(15) DEFAULT 'PORTUGUES',
COD VARCHAR(4),
CONSTRAINT PK_ARTIGO PRIMARY KEY (MAT),
CONSTRAINT FK_ART_EVE FOREIGN KEY (COD) REFERENCES EVENTO (COD),
CONSTRAINT CHK_ART_NOTA CHECK (NOTA BETWEEN 0 AND 10)
);

-- CRIA TABELA ESCREVE
CREATE TABLE ESCREVE(
CPF VARCHAR(4),
MAT VARCHAR(4),
CONSTRAINT ESCREVE_PK PRIMARY KEY (CPF, MAT),
CONSTRAINT ESCREVEPESQUISADOR_FK FOREIGN KEY (CPF) REFERENCES PESQUISADOR ON DELETE CASCADE,
CONSTRAINT ESCREVEARTIGO_FK FOREIGN KEY (MAT) REFERENCES ARTIGO ON DELETE CASCADE
);



----------------------
-- POVOAMENTO DO BD --
----------------------

INSERT INTO PESQUISADOR VALUES ( '1111', 'ANA', 'UFPE', TO_DATE('12/03/1970','DD/MM/YYYY'));
INSERT INTO PESQUISADOR VALUES ( '2222', 'ROSA', 'UFPE', TO_DATE('12/03/1970','DD/MM/YYYY'));
INSERT INTO PESQUISADOR VALUES ( '3333', 'PEDRO', 'UFPE', TO_DATE('12/03/1980','DD/MM/YYYY'));
INSERT INTO PESQUISADOR VALUES ( '4444', 'RUI', 'UFRN', TO_DATE('12/03/1985','DD/MM/YYYY'));
INSERT INTO PESQUISADOR VALUES ( '5555', 'RITA', 'UFAL', TO_DATE('12/03/1990','DD/MM/YYYY'));

INSERT INTO EVENTO VALUES ( '1000', 'SIMPOSIO BRASILEIRO DE BD 23', 'SBBD23', 2023);
INSERT INTO EVENTO VALUES ( '2000', 'SIMPOSIO BRASILEIRO DE BD 22', 'SBBD22', 2022);
INSERT INTO EVENTO VALUES ( '3000', 'SIMPOSIO BRASILEIRO DE BD 21', 'SBBD21', 2021);


INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '1010', 'BD AVANCADO', 8, 2000);
INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '2020', 'BD NAO CONVENCIONAL', 10, 2000);
INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '3030', 'BD PARA DECISAO', 9,2000);
INSERT INTO ARTIGO                          VALUES ( '4040', 'DATABASE FOR ALL', 8, 'INGLES',2000);
INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '5050', 'BD NO-SQL', 8, 3000);
INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '6060', 'BD PARA LEIGOS', 8, 3000);
INSERT INTO ARTIGO (MAT, TITULO, NOTA, COD) VALUES ( '7070', 'ARTIGO RUIM-NAO PUBLICADO', 4, NULL);


INSERT INTO ESCREVE VALUES ( '1111', '1010');
INSERT INTO ESCREVE VALUES ( '2222', '1010');
INSERT INTO ESCREVE VALUES ( '1111', '2020');
INSERT INTO ESCREVE VALUES ( '2222', '2020');
INSERT INTO ESCREVE VALUES ( '3333', '3030');
INSERT INTO ESCREVE VALUES ( '4444', '4040');
INSERT INTO ESCREVE VALUES ( '4444', '5050');
INSERT INTO ESCREVE VALUES ( '4444', '6060');
INSERT INTO ESCREVE VALUES ( '4444', '7070');
